\documentclass[12pt,a4paper]{book}
\usepackage[spanish]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[colorlinks=true, linkcolor=blue, urlcolor=blue, citecolor=red]{hyperref}

% --- Flag para builds por capítulo (debe ir ANTES de \chaptersel) ---
\newif\ifonlychapter
\onlychapterfalse % build normal por defecto

% --- Hook opcional (no-op por defecto; los *_only.tex lo redefinen) ---
\providecommand{\chaptersel}{}
\chaptersel


\begin{document}

% Si es build normal: frontmatter + TOC + mainmatter.
% Si es solo capítulo: entra directo a mainmatter y NO hay TOC.
\ifonlychapter
  \mainmatter
\else
  \frontmatter
  \tableofcontents
  \mainmatter
\fi

\include{capitulos/cap1}
\include{capitulos/cap2}
\include{capitulos/cap3}

\backmatter
% Bibliografía más adelante

\end{document}
